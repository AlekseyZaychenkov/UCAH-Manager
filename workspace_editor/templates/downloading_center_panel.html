{% extends 'base.html' %} {% load widget_tweaks %} {% block content %}


{% for holder, posts in holder_to_posts.items %}

<div class="card mb-2">


    <div class="input-group-prepend" id="button-addon">
        <form method="post"> {% csrf_token %}
<!--        <div class="btn-group" role="group">-->
                <!-- TODO: change to form to pass holder_id -->
                <button class="btn btn-primary" type="submit" name="action" value="add_all_from_holder_to_main"><< Add all</button>
                <!-- TODO: create holder_filters_modal -->
                <a type="button" class="btn btn-outline-dark" data-toggle="modal" data-target="#holder_filters_modal">Filters</a>
                <!-- TODO: create edit_compilation_modal -->
                <a type="button" class="btn btn-outline-dark" data-toggle="modal" data-target="#edit_compilation_modal">Filters</a>
<!--        </div>-->

<!--        <div class="form-group">-->
                <h5 class="px-2 g-2">{{holder.name}}, {{holder.number_on_list}}</h5>
                <button type="button" disabled class="btn btn-outline-dark">
                    posts <span class="badge badge-light">{{holder.number_on_list|length}}</span>
                </button>

<!--        </div>-->

            <!--        <div class="form-group">-->
            <!-- TODO: change to form to pass holder_id -->
                <button class="btn btn-outline-dark" type="submit" name="action" value="download_posts">Download posts</button>
            <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="downloadSwitch">
                <label class="custom-control-label" for="downloadSwitch">Autoload</label>
            </div>
            <select class="form-control">
                {% for r in resources %}
                    <option>{{r.0}}</option>
                {% endfor %}
            </select>

            <div class="form-group col-md-6">
                <label for="number_on_list">Order on list</label>
                <select class="form-control">
                    {% for i in holder_indexes %}
                        <option>{{i}}</option>
                    {% endfor %}
                </select>
            </div>

            <!--        </div>-->
        </form>
    </div>

    <div class="row">
        {% for post in posts  %}
            <div class="col-md-4 card">
                <div class="col">
                    {% block post_info %}
                    {% include 'post_info.html' %}
                    {% endblock %}
                </div>
            </div>
        {% endfor %}
    </div>
</div>



{% endfor %}
<div class="card">
    <a type="button" class="btn btn-outline-dark" data-toggle="modal" data-target="#new_compilation_modal"> + Add new compilation + </a>
</div>

{% block compilation_modals %}
{% include 'downloading_compilation_modals.html' %}
{% endblock %}



{% endblock content %}