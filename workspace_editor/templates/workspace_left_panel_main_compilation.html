{% load widget_tweaks %} {% block content %}
{% load static %}


<div class="container">
  <hr>
  {% if workspace != 0 %}
  <div class="row">
    {% for post in post_list %}
    <div class="col-md-6 card">
      <div class="m-2">

        <form method="post"> {% csrf_token %}

          <div class="btn-group row" role="group">
            {% render_field event_createform.start_date class="form-control-sm" type="datetime-local" %}
            {{ event_createform.start_date.errors }}

            <div class="d-none">
              {% render_field event_createform.post_id|append_attr:"readonly:readonly" class="form-control" id="id_name_event" value=post.id %}
            </div>

          </div>
          <div class="float-right">
            <button class="btn-sm btn-primary text-uppercase font-weight-bold mb-1" type="submit" name="action" value="create_event">>></button>
          </div>



          <!-- TODO: add proposed time field and showing -->
          <!-- TODO: add opportunity to change the time -->

          <!-- TODO: place picture more compact -->

          <p class="mt-3">{{post.text}}</p>
          <div class="row">
            {% for pi in post.stored_file_urls %}
              {% if forloop.counter == 1 %}
                <img src="../{{pi}}" class="img-fluid" style="height: 200px; object-fit: contain;" alt="">
              {% else %}
                <div class="col-md-4 col-lg-4 p-2">
                  <img src="../{{pi}}" class="img-fluid" style="height: 75px; object-fit: contain;" alt="">
                </div>
              {% endif %}
              {% empty %}
            {% endfor %}
          </div>
        </form>

        <!-- TODO: make a text foldable-->
        <!--                                                                <p class="mt-4">Description: '{{post.text}}'</p>-->

        <a href="{{post.original_post_url}}" target="_blank">Original post (for debug)</a>
        <!-- TODO: figure out and add other useful information -->


      </div>
    </div>
    {% endfor %}
  </div>
  <nav aria-label="...">
    <ul class="pagination">
      {% if post_list.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page={{ post_list.previous_page_number }}">Previous</a>
      </li>
      {% else %}
      <li class="page-item disabled">
        <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
      </li>
      {% endif %}

      {% for i in post_list.paginator.page_range %}
        {% if i == post_list.number %}
          <li class="page-item active"><a class="page-link">{{i}}</a></li>
        {% else %}
          <li class="page-item"><a class="page-link" href="?page={{i}}">{{i}}</a></li>
        {% endif %}
      {% endfor %}

      {% if post_list.has_next %}
        <li class="page-item">
          <a class="page-link" href="?page={{ post_list.next_page_number }}">Next</a>
        </li>
      {% else %}
        <li class="page-item disabled">
          <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Next</a>
        </li>
      {% endif %}
    </ul>
  </nav>
  {% endif %}
</div>
{% endblock content %}